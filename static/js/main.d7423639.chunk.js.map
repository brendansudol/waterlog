{"version":3,"sources":["App.js","index.js"],"names":["CONFETTI_CONFIG","angle","spread","startVelocity","elementCount","dragFriction","duration","delay","width","height","colors","UNITS","label","scale","step","max","initial","formatter","fmt","formatPercent","formatValue","value","unit","concat","getDateKey","date","format","getValue","obj","key","fallback","getTotal","memoize","entries","reduce","acc","curr","getSavedState","JSON","parse","localStorage","getItem","_unused","Container","styled","_ref","margin","maxWidth","padding","$theme","sizing","scale600","ThumbValue","_ref2","Object","objectSpread","position","top","scale800","typography","font300","backgroundColor","App","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleAddEntry","setState","prev","toConsumableArray","localValue","unitIdx","time","getTime","Date","updateLocalStorage","handleDeleteEntry","deleteIdx","filter","_","idx","handleSliderChange","_ref3","handleUnitClick","event","state","setItem","stringify","saved","_this2","_this$state","total","percentDone","react_default","a","createElement","block","marginBottom","display","flexDirection","alignItems","font","justifyContent","button_group","selected","mode","size","SIZE","compact","onClick","baseui_button","flex","slider","min","onChange","overrides","Track","style","_ref4","paddingTop","scale900","paddingBottom","paddingLeft","scale700","paddingRight","TickBar","_ref5","$value","_ThumbValue","confetti_default","active","config","progress_bar","successValue","getProgressLabel","showLabel","Root","_ref6","Bar","_ref7","x","marginTop","marginLeft","marginRight","scale300","primary50","BarProgress","Label","_ref8","font350","color","mono1000","length","react","map","entry","i","$style","borderRadius","shape","SHAPE","round","kind","KIND","tertiary","BaseButton","_ref9","scale100","delete_default","Component","engine","Styletron","ReactDOM","render","browser_es5_es","baseui","theme","LightTheme","src_App","startOfDay","document","getElementById"],"mappings":"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","file":"static/js/main.d7423639.chunk.js","sourcesContent":["import { styled } from \"baseui\";\nimport { Block } from \"baseui/block\";\nimport { Button, KIND, SHAPE, SIZE } from \"baseui/button\";\nimport { ButtonGroup } from \"baseui/button-group\";\nimport Delete from \"baseui/icon/delete\";\nimport { ProgressBar } from \"baseui/progress-bar\";\nimport { Slider } from \"baseui/slider\";\nimport { format as fmt } from \"d3-format\";\nimport { format, getTime, parse } from \"date-fns\";\nimport memoize from \"memoize-one\";\nimport React, { Component, Fragment } from \"react\";\nimport Confetti from \"react-dom-confetti\";\n\nconst GOAL_VALUE = 100;\n\nconst CONFETTI_CONFIG = {\n  angle: 135,\n  spread: 100,\n  startVelocity: 30,\n  elementCount: 50,\n  dragFriction: 0.1,\n  duration: 6000,\n  delay: 0,\n  width: \"10px\",\n  height: \"10px\",\n  colors: [\"#a864fd\", \"#29cdff\", \"#78ff44\", \"#ff718d\", \"#fdff6a\"]\n};\n\nconst UNITS = [\n  { label: \"oz\", scale: 1, step: 1, max: 16, initial: 8, formatter: fmt(\".0f\") },\n  { label: \"L\", scale: 0.0295735, step: 0.25, max: 1, initial: 0.5, formatter: fmt(\".2~f\") }\n];\n\nconst formatPercent = fmt(\".0%\");\nconst formatValue = (value, unit) => `${unit.formatter(value * unit.scale)}${unit.label}`;\n\nconst padding = x => ({ paddingTop: x, paddingBottom: x, paddingLeft: x, paddingRight: x });\nconst margin = x => ({ marginTop: x, marginBottom: x, marginLeft: x, marginRight: x });\n\nconst getDateKey = date => format(date, \"YYYYMMDD\");\nconst getValue = (obj, key, fallback) => (obj[key] != null ? obj[key] : fallback);\nconst getTotal = memoize(entries => entries.reduce((acc, curr) => acc + curr.value, 0));\nconst getSavedState = date => {\n  try {\n    return JSON.parse(localStorage.getItem(getDateKey(date)));\n  } catch {}\n};\n\nconst Container = styled(\"div\", ({ $theme }) => ({\n  margin: \"0 auto\",\n  maxWidth: \"500px\",\n  padding: $theme.sizing.scale600\n}));\n\nconst ThumbValue = styled(\"div\", ({ $theme }) => ({\n  position: \"absolute\",\n  top: `-${$theme.sizing.scale800}`,\n  ...$theme.typography.font300,\n  backgroundColor: \"transparent\"\n}));\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    const saved = getSavedState(props.date) || {};\n    const unitIdx = getValue(saved, \"unitIdx\", 0);\n\n    this.state = {\n      entries: getValue(saved, \"entries\", []),\n      localValue: getValue(saved, \"localValue\", UNITS[unitIdx].initial),\n      unitIdx\n    };\n  }\n\n  handleAddEntry = () => {\n    this.setState(\n      prev => ({\n        entries: [\n          ...prev.entries,\n          { value: prev.localValue / UNITS[prev.unitIdx].scale, time: getTime(new Date()) }\n        ]\n      }),\n      this.updateLocalStorage\n    );\n  };\n\n  handleDeleteEntry = deleteIdx => () => {\n    this.setState(\n      prev => ({\n        entries: prev.entries.filter((_, idx) => idx !== deleteIdx)\n      }),\n      this.updateLocalStorage\n    );\n  };\n\n  handleSliderChange = ({ value }) => {\n    this.setState({ localValue: value[0] });\n  };\n\n  handleUnitClick = (event, idx) => {\n    if (this.state.unit === idx) return;\n    this.setState({ unitIdx: idx, localValue: UNITS[idx].initial }, this.updateLocalStorage);\n  };\n\n  updateLocalStorage = () => {\n    const { date } = this.props;\n    localStorage.setItem(getDateKey(date), JSON.stringify(this.state));\n  };\n\n  render() {\n    const { date } = this.props;\n    const { entries, localValue, unitIdx } = this.state;\n\n    const total = getTotal(entries);\n    const unit = UNITS[unitIdx];\n    const percentDone = formatPercent(total / GOAL_VALUE);\n\n    return (\n      <Container>\n        <Block marginBottom=\"scale600\" display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n          {/* eslint-disable-next-line jsx-a11y/accessible-emoji */}\n          <Block font=\"font500\">ðŸ’§ Waterlog ðŸ’§</Block>\n          <Block font=\"font400\">{format(date, \"ddd, MMM Do\")}</Block>\n        </Block>\n        <Block display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n          <ButtonGroup\n            selected={unitIdx}\n            mode=\"radio\"\n            size={SIZE.compact}\n            onClick={this.handleUnitClick}\n          >\n            <Button>ounces</Button>\n            <Button>liters</Button>\n          </ButtonGroup>\n          <Block flex=\"1 1 auto\">\n            <Slider\n              value={[localValue]}\n              min={0}\n              max={unit.max}\n              step={unit.step}\n              onChange={this.handleSliderChange}\n              overrides={{\n                Track: {\n                  style: ({ $theme }) => ({\n                    paddingTop: $theme.sizing.scale900,\n                    paddingBottom: $theme.sizing.scale900,\n                    paddingLeft: $theme.sizing.scale700,\n                    paddingRight: $theme.sizing.scale700\n                  })\n                },\n                TickBar: () => null,\n                ThumbValue: ({ $value }) => (\n                  <ThumbValue>\n                    {$value}\n                    {unit.label}\n                  </ThumbValue>\n                )\n              }}\n            />\n          </Block>\n          <Button size={SIZE.compact} onClick={this.handleAddEntry}>\n            <Confetti active={total >= GOAL_VALUE} config={CONFETTI_CONFIG} />\n            Add\n          </Button>\n        </Block>\n        <ProgressBar\n          value={total}\n          successValue={GOAL_VALUE}\n          getProgressLabel={() => `${formatValue(total, unit)} (${percentDone})`}\n          showLabel={true}\n          overrides={{\n            Root: {\n              style: ({ $theme }) => ({ marginBottom: $theme.sizing.scale800 })\n            },\n            Bar: {\n              style: ({ $theme }) => ({\n                ...margin(0),\n                marginBottom: $theme.sizing.scale300,\n                height: $theme.sizing.scale800,\n                backgroundColor: $theme.colors.primary50\n              })\n            },\n            BarProgress: {\n              style: () => ({ maxWidth: \"100%\" })\n            },\n            Label: {\n              style: ({ $theme }) => ({\n                ...$theme.typography.font350,\n                color: $theme.colors.mono1000\n              })\n            }\n          }}\n        />\n        {entries.length > 0 && (\n          <Fragment>\n            <Block marginBottom=\"scale800\">\n              {entries.map((entry, i) => (\n                <Block\n                  key={i}\n                  display=\"flex\"\n                  alignItems=\"center\"\n                  justifyContent=\"space-between\"\n                  marginBottom=\"scale400\"\n                  padding=\"scale400\"\n                  $style={{ backgroundColor: \"rgb(247, 247, 247)\", borderRadius: \"5px\" }}\n                >\n                  <Block>\n                    {formatValue(entry.value, unit)} @ {format(parse(entry.time), \"h:mmA\")}\n                  </Block>\n                  <Button\n                    shape={SHAPE.round}\n                    kind={KIND.tertiary}\n                    onClick={this.handleDeleteEntry(i)}\n                    overrides={{\n                      BaseButton: {\n                        style: ({ $theme }) => ({ ...padding($theme.sizing.scale100) })\n                      }\n                    }}\n                  >\n                    <Delete />\n                  </Button>\n                </Block>\n              ))}\n            </Block>\n          </Fragment>\n        )}\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import { LightTheme, BaseProvider } from \"baseui\";\nimport { startOfDay } from \"date-fns\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider as StyletronProvider } from \"styletron-react\";\nimport { Client as Styletron } from \"styletron-engine-atomic\";\n\nimport App from \"./App\";\nimport \"./index.css\";\n\nconst engine = new Styletron();\n\nReactDOM.render(\n  <StyletronProvider value={engine}>\n    <BaseProvider theme={LightTheme}>\n      <App date={startOfDay(new Date())} />\n    </BaseProvider>\n  </StyletronProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}